{"ast":null,"code":"import _slicedToArray from\"/Users/sparklet/appstore-client/appstore/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Layout,Dropdown,Menu,Button,message}from\"antd\";import{UserOutlined}from\"@ant-design/icons\";import React,{useEffect,useState}from\"react\";import LoginForm from\"./components/LoginForm\";import HomePage from\"./components/HomePage\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Header=Layout.Header,Content=Layout.Content;var App=function App(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),authed=_useState2[0],setAuthed=_useState2[1];useEffect(function(){var query=new URLSearchParams(window.location.search);if(query.get(\"success\")){message.success(\"Order placed\");}},[]);useEffect(function(){var authToken=localStorage.getItem(\"authToken\");setAuthed(authToken!==null);},[]);var handleLoginSuccess=function handleLoginSuccess(){setAuthed(true);};var handleLogOut=function handleLogOut(){localStorage.removeItem(\"authToken\");setAuthed(false);};var renderContent=function renderContent(){if(authed===undefined){return/*#__PURE__*/_jsx(_Fragment,{});}if(!authed){return/*#__PURE__*/_jsx(LoginForm,{onLoginSuccess:handleLoginSuccess});}return/*#__PURE__*/_jsx(HomePage,{});};var userMenu=/*#__PURE__*/_jsx(Menu,{children:/*#__PURE__*/_jsx(Menu.Item,{onClick:handleLogOut,children:\"Log Out\"},\"logout\")});return/*#__PURE__*/_jsxs(Layout,{style:{height:\"100vh\"},children:[/*#__PURE__*/_jsxs(Header,{style:{display:\"flex\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:16,fontWeight:600,color:\"white\"},children:\"App Store\"}),authed&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Dropdown,{trigger:\"click\",overlay:userMenu,children:/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(UserOutlined,{}),shape:\"circle\"})})})]}),/*#__PURE__*/_jsx(Content,{style:{height:\"calc(100% - 64px)\",padding:20,overflow:\"auto\"},children:renderContent()})]});};export default App;","map":{"version":3,"names":["Layout","Dropdown","Menu","Button","message","UserOutlined","React","useEffect","useState","LoginForm","HomePage","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","Header","Content","App","_useState","_useState2","_slicedToArray","authed","setAuthed","query","URLSearchParams","window","location","search","get","success","authToken","localStorage","getItem","handleLoginSuccess","handleLogOut","removeItem","renderContent","undefined","onLoginSuccess","userMenu","children","Item","onClick","style","height","display","justifyContent","fontSize","fontWeight","color","trigger","overlay","icon","shape","padding","overflow"],"sources":["/Users/sparklet/appstore-client/appstore/src/App.js"],"sourcesContent":["import { Layout, Dropdown, Menu, Button, message } from \"antd\";\nimport { UserOutlined } from \"@ant-design/icons\";\nimport React, { useEffect, useState } from \"react\";\nimport LoginForm from \"./components/LoginForm\";\nimport HomePage from \"./components/HomePage\";\n\nconst { Header, Content } = Layout;\n\nconst App = () => {\n  const [authed, setAuthed] = useState();\n\n  useEffect(() => {\n    const query = new URLSearchParams(window.location.search);\n\n    if (query.get(\"success\")) {\n      message.success(\"Order placed\");\n    }\n  }, []);\n\n  useEffect(() => {\n    const authToken = localStorage.getItem(\"authToken\");\n    setAuthed(authToken !== null);\n  }, []);\n\n  const handleLoginSuccess = () => {\n    setAuthed(true);\n  };\n\n  const handleLogOut = () => {\n    localStorage.removeItem(\"authToken\");\n    setAuthed(false);\n  };\n\n  const renderContent = () => {\n    if (authed === undefined) {\n      return <></>;\n    }\n\n    if (!authed) {\n      return <LoginForm onLoginSuccess={handleLoginSuccess} />;\n    }\n\n    return <HomePage />;\n  };\n\n  const userMenu = (\n    <Menu>\n      <Menu.Item key=\"logout\" onClick={handleLogOut}>\n        Log Out\n      </Menu.Item>\n    </Menu>\n  );\n\n  return (\n    <Layout style={{ height: \"100vh\" }}>\n      <Header style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n        <div style={{ fontSize: 16, fontWeight: 600, color: \"white\" }}>\n          App Store\n        </div>\n        {authed && (\n          <div>\n            <Dropdown trigger=\"click\" overlay={userMenu}>\n              <Button icon={<UserOutlined />} shape=\"circle\" />\n            </Dropdown>\n          </div>\n        )}\n      </Header>\n      <Content\n        style={{ height: \"calc(100% - 64px)\", padding: 20, overflow: \"auto\" }}\n      >\n        {renderContent()}\n      </Content>\n    </Layout>\n  );\n};\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}