{"ast":null,"code":"import _objectSpread from\"/Users/sparklet/appstore-client/appstore/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/sparklet/appstore-client/appstore/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/sparklet/appstore-client/appstore/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sparklet/appstore-client/appstore/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState}from\"react\";import{Form,Input,InputNumber,Button,message}from\"antd\";import{uploadApp}from\"../utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var layout={labelCol:{span:8},wrapperCol:{span:16}};var PostApps=function PostApps(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var fileInputRef=useRef(null);var handleFormSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var files;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:files=fileInputRef.current.files;setLoading(true);_context.prev=2;_context.next=5;return uploadApp(data,files[0]);case 5:message.success(\"upload successfully\");_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](2);message.error(_context.t0.message);case 11:_context.prev=11;setLoading(false);return _context.finish(11);case 14:case\"end\":return _context.stop();}},_callee,null,[[2,8,11,14]]);}));return function handleFormSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Form,_objectSpread(_objectSpread({},layout),{},{onFinish:handleFormSubmit,style:{maxWidth:1000,margin:\"auto\"},children:[/*#__PURE__*/_jsx(Form.Item,{name:\"title\",label:\"Title\",rules:[{required:true}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{name:\"description\",label:\"Description\",rules:[{required:true}],children:/*#__PURE__*/_jsx(Input.TextArea,{autoSize:{minRows:2,maxRows:6}})}),/*#__PURE__*/_jsx(Form.Item,{name:\"picture\",label:\"Picture\",rules:[{required:true}],children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/png, image/jpeg\",ref:fileInputRef})}),/*#__PURE__*/_jsx(Form.Item,{name:\"price\",label:\"Price\",rules:[{required:true,type:\"number\",min:0}],children:/*#__PURE__*/_jsx(InputNumber,{prefix:\"$\",precision:2})}),/*#__PURE__*/_jsx(Form.Item,{wrapperCol:_objectSpread(_objectSpread({},layout.wrapperCol),{},{offset:8}),children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",loading:loading,children:\"Submit\"})})]}));};export default PostApps;","map":{"version":3,"names":["React","useRef","useState","Form","Input","InputNumber","Button","message","uploadApp","jsx","_jsx","jsxs","_jsxs","layout","labelCol","span","wrapperCol","PostApps","_useState","_useState2","_slicedToArray","loading","setLoading","fileInputRef","handleFormSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","files","wrap","_callee$","_context","prev","next","current","success","t0","error","finish","stop","_x","apply","arguments","_objectSpread","onFinish","style","maxWidth","margin","children","Item","name","label","rules","required","TextArea","autoSize","minRows","maxRows","type","accept","ref","min","prefix","precision","offset","htmlType"],"sources":["/Users/sparklet/appstore-client/appstore/src/components/PostApps.js"],"sourcesContent":["import React, { useRef, useState } from \"react\";\nimport { Form, Input, InputNumber, Button, message } from \"antd\";\nimport { uploadApp } from \"../utils\";\n\nconst layout = {\n  labelCol: { span: 8 },\n  wrapperCol: { span: 16 },\n};\n\nconst PostApps = () => {\n  const [loading, setLoading] = useState(false);\n\n  const fileInputRef = useRef(null);\n\n  const handleFormSubmit = async (data) => {\n    const { files } = fileInputRef.current;\n\n    setLoading(true);\n\n    try {\n      await uploadApp(data, files[0]);\n      message.success(\"upload successfully\");\n    } catch (error) {\n      message.error(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Form\n      {...layout}\n      onFinish={handleFormSubmit}\n      style={{ maxWidth: 1000, margin: \"auto\" }}\n    >\n      <Form.Item name=\"title\" label=\"Title\" rules={[{ required: true }]}>\n        <Input />\n      </Form.Item>\n      <Form.Item\n        name=\"description\"\n        label=\"Description\"\n        rules={[{ required: true }]}\n      >\n        <Input.TextArea autoSize={{ minRows: 2, maxRows: 6 }} />\n      </Form.Item>\n      <Form.Item name=\"picture\" label=\"Picture\" rules={[{ required: true }]}>\n        <input type=\"file\" accept=\"image/png, image/jpeg\" ref={fileInputRef} />\n      </Form.Item>\n      <Form.Item\n        name=\"price\"\n        label=\"Price\"\n        rules={[{ required: true, type: \"number\", min: 0 }]}\n      >\n        <InputNumber prefix=\"$\" precision={2} />\n      </Form.Item>\n      <Form.Item wrapperCol={{ ...layout.wrapperCol, offset: 8 }}>\n        <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\n          Submit\n        </Button>\n      </Form.Item>\n    </Form>\n  );\n};\n\nexport default PostApps;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}